<div class="m-tooltip" [class.m-tooltip--anchored]="!!anchor">
  <i
    *ngIf="icon && !iconSrc"
    class="material-icons"
    [ngClass]="iconClass"
    [ngStyle]="iconStyle"
    >{{ icon }}</i
  >
  <img *ngIf="iconSrc && !icon" [src]="cdnAssetsUrl + iconSrc" />
  <ng-content select="[m-tooltip--icon]"></ng-content>
  <ng-content select="[m-tooltip--anchor]"></ng-content>

  <div
    class="m-tooltip--bubble"
    [class.m-tooltip--bubble--fixed]="useParentPosition"
    [style.top.px]="useParentPosition ? offsetTop : false"
    [style.right.px]="useParentPosition ? offsetRight : false"
    [style.left.px]="useParentPosition ? offsetLeft : false"
    [class.m-tooltip--bubble--anchor-top]="
      !useParentPosition && anchor == 'top'
    "
    [class.m-tooltip--bubble--anchor-bottom]="
      !useParentPosition && anchor == 'bottom'
    "
    [class.m-tooltip--bubble--anchor-left]="
      !useParentPosition && anchor == 'left'
    "
    [class.m-tooltip--bubble--anchor-right]="
      !useParentPosition && anchor == 'right'
    "
    [hidden]="hidden"
    [ngStyle]="tooltipBubbleStyle"
    (mousedown)="tooltipMouseDown.emit()"
  >
    <div
      *ngIf="showArrow"
      class="m-tooltip__triangle"
      [class.m-tooltip__triangle--top]="anchor === 'top'"
      [style.right.px]="
        anchor === 'top' || anchor === 'bottom' ? triangleOffset : undefined
      "
      [style.top.px]="
        anchor === 'left' || anchor === 'right' ? triangleOffset : undefined
      "
    ></div>
    <ng-content></ng-content>
  </div>
</div>
