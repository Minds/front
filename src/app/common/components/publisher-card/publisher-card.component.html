<div
  class="m-publisherCard"
  [ngClass]="{
    'm-publisherCard--large': size === 'large',
    'm-publisherCard--medium': size === 'medium',
    'm-publisherCard--small': size === 'small',
    'm-publisherCard--featured': featured,
    'm-publisherCard--hovercard': _isHovercard
  }"
  *ngIf="publisher"
  #publisherCard
>
  <div class="m-publisherCard__inner">
    <!-- --OWNER ROW ----------------------------- -->
    <div class="m-publisherCard__ownerRow m-legible">
      <!-- AVATAR -->
      <div
        class="minds-avatar"
        [ngClass]="{
          'm-publisherCardAvatar--hasMarker': publisher.hasMarker
        }"
      >
        <a [routerLink]="feedUrl">
          <div
            class="m-publisherCardAvatarImg m-border"
            [style.background-image]="'url(' + (getAvatarSrc() | async) + ')'"
          ></div>
        </a>
      </div>
      <!-- NAMES -->
      <div class="m-publisherCardOwnerRow__owner">
        <div>
          <a
            class="m-publisherCardOwnerRowItem__primary"
            [routerLink]="feedUrl"
            title="{{ publisher.name }}"
            >{{ publisher.name }}</a
          >
          <m-accountQualityScore
            [targetUser]="publisher"
          ></m-accountQualityScore>
          <m-channel--badges
            *ngIf="type === 'user'"
            class="m-channel--badges-activity"
            [user]="publisher"
            [badges]="['admin', 'verified', 'plus', 'pro']"
            [showMidDot]="true"
          ></m-channel--badges>
        </div>
        <div>
          <a
            *ngIf="type === 'user'"
            class="m-publisherCardOwnerRowItem__secondary m-legible"
            [routerLink]="['/', publisher.username]"
            title="@{{ publisher.username }}"
            >@{{ publisher.username }}</a
          >
          <a
            *ngIf="type === 'group'"
            class="m-publisherCardOwnerRowItem__secondary m-legible"
            [routerLink]="subscribersUrl"
          >
            <span class="m-publisherCardSubs__count">{{
              publisher['members:count'] | abbr: 0
            }}</span>
            <span class="m-publisherCardSubs__header">
              member<ng-container *ngIf="publisher['members:count'] > 1"
                >s</ng-container
              >
            </span>
          </a>
        </div>
      </div>
      <!-- SUBSCRIBE BUTTON -->
      <ng-container *ngIf="showSubscribeButton">
        <!-- For channels -->
        <m-subscribeButton
          *ngIf="type === 'user'"
          [user]="publisher"
          [sized]="sized"
          [iconOnly]="btnIconOnly"
          [disableSubscribe]="disableSubscribe"
          [enableRecheck]="recheckSubscribed"
        ></m-subscribeButton>
        <!-- For groups -->
        <m-group__membershipButton
          *ngIf="type === 'group'"
          [group]="publisher"
          [iconOnly]="btnIconOnly"
          [size]="subscribeButtonSize"
        ></m-group__membershipButton
      ></ng-container>
    </div>
    <!-- - SUBS ---------------------------- -->
    <div
      class="m-publisherCard__subs"
      *ngIf="shouldShowSubs && type === 'user'"
    >
      <a [routerLink]="subscribersUrl" class="m-legible">
        <ng-container *ngIf="type === 'user'"
          ><span class="m-publisherCardSubs__count">{{
            publisher.subscribers_count | abbr: 0
          }}</span>
          <span class="m-publisherCardSubs__header">subscribers</span>
        </ng-container>
      </a>

      <ng-container *ngIf="type === 'user'">
        <span class="m-publisherCard__dot">Â·</span>
        <a
          [routerLink]="['/', publisher.username, 'subscriptions']"
          class="m-legible"
          ><span class="m-publisherCardSubs__count">{{
            publisher.subscriptions_count | abbr: 0
          }}</span>
          <span class="m-publisherCardSubs__header">subscriptions</span></a
        ></ng-container
      >
    </div>
    <!-- - DESC ---------------------------- -->
    <div
      class="m-publisherCard__desc"
      *ngIf="showDescription && publisher.briefdescription"
    >
      <p [innerHtml]="publisher.briefdescription | tags">
        {{ publisher.briefdescription }}
      </p>
    </div>
  </div>
</div>
