<div
  class="m-networkAdminConsoleRolesUsers__headerRow m-networkAdminConsoleRolesUsers__row"
>
  <div><span i18n="@@COMMON_USER">User</span></div>
  <!-- ------------------------------------------- -->
  <!-- ROLE FILTER  -->
  <!-- ------------------------------------------- -->
  <div class="m-networkAdminConsoleRolesUsersHeaderRow__filtersWrapper">
    <div class="m-networkAdminConsoleRolesUsersHeaderRow__filter--dropdown">
      <m-dropdownSelector
        *ngIf="filter.options.length > 0"
        [filter]="filter"
        [inlineLabel]="true"
        (selectionMade)="onFilterChange($event)"
      ></m-dropdownSelector>
    </div>
    <!-- ------------------------------------------- -->
    <!-- SEARCH BAR (DISABLED) -->
    <!-- ------------------------------------------- -->
    <!-- <div class="m-networkAdminConsoleRolesUsersHeaderRow__filter--search">
      <input
        name="q"
        type="text"
        id="search"
        placeholder="Search"
        i18n-placeholder="@@COMMON__SEARCH"
        #searchInput
      />
      <i class="material-icons">search</i>
    </div> -->
  </div>
</div>
<!-- ------------------------------------------- -->
<!-- USERS  -->
<!-- ------------------------------------------- -->
<ng-container *ngFor="let user of users$ | async">
  <div
    class="m-networkAdminConsoleRolesUsers__userRow m-networkAdminConsoleRolesUsers__row"
  >
    <div class="m-networkAdminConsoleRolesUserRow__userWrapper">
      <m-hovercard
        class="m-networkAdminConsoleRolesUserRow__avatarWrapper"
        [publisher]="user.node.legacy"
        [offset]="[0, 15]"
      >
        <a [routerLink]="['/', user.node.username]">
          <img [src]="getUserAvatarUrl(user.node)" />
        </a>
      </m-hovercard>
      <div class="m-networkAdminConsoleRolesUserRow__namesContainer">
        <span>{{ user.node.name }}</span> <span>@{{ user.node.username }}</span>
      </div>
    </div>
    <div class="m-networkAdminConsoleRolesUserRow__roles">
      <m-button
        (onAction)="onAssignRolesClick(user)"
        iconOnly="true"
        title="Assign roles"
        ><i class="material-icons">edit</i></m-button
      >
      <div
        class="m-networkAdminConsoleRolesUserRow__role"
        *ngFor="let role of user.roles | slice: -1"
      >
        <m-networkAdminConsoleRole__icon
          [roleId]="role.id"
        ></m-networkAdminConsoleRole__icon>
        <span>{{ role.name | titlecase }}</span>
      </div>
      <span
        *ngIf="user.roles.length > 1"
        class="m-networkAdminConsoleRolesUserRow__additionalRoleCount"
        >+{{ user.roles.length - 1 }}
        {{ user.roles.length === 2 ? 'role' : 'roles' }}</span
      >
    </div>
  </div>
</ng-container>
<infinite-scroll
  *ngIf="hasNextPage$ | async"
  (load)="fetchMore()"
  [moreData]="hasNextPage$ | async"
  [inProgress]="inProgress$ | async"
  [hideManual]="true"
></infinite-scroll>

<span
  class="m-networkAdminConsoleRoles__noResultsNotice"
  *ngIf="
    !(inProgress$ | async) &&
    (users$ | async).length < 1 &&
    (roleFilter$ | async)
  "
>
  No users are assigned this role.
</span>
