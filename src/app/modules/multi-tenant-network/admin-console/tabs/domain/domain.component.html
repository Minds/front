<ng-container *ngIf="service.init$ | async; else loadingSpinnerTemplate">
  <h4
    class="m-networkAdminConsole__title"
    i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__TITLE"
  >
    Domain settings
  </h4>
  <p
    class="m-networkAdminConsole__subtitle"
    i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__SUBTITLE"
  >
    Connect your network to your own domain to begin building your community.
  </p>

  <!-- ------------------------------------- -->
  <!-- CURRENT DOMAIN BOX  -->
  <!-- ------------------------------------- -->
  <div class="m-networkAdminDomain__currentDomainContainer">
    <h4 class="m-networkAdminDomainCurrentDomain__title">Current domain</h4>
    <span class="m-networkAdminDomainCurrentDomain__name">{{
      domain?.domain
    }}</span>
    <div class="m-networkAdminDomainCurrentDomain__statusDotRow">
      <span
        [ngClass]="{
          'm-networkAdminDomainCurrentDomain__statusDot--green':
            (service.isActive$ | async) || (service.isAutogenerated$ | async),
          'm-networkAdminDomainCurrentDomain__statusDot--purple':
            service.isPending$ | async,
          'm-networkAdminDomainCurrentDomain__statusDot--red':
            service.isFailed$ | async
        }"
      ></span>
      <span class="m-networkAdminDomainCurrentDomain__statusDotDesc"
        ><ng-container *ngIf="service.isAutogenerated$ | async"
          >This temporary domain is automatically generated</ng-container
        >
        <ng-container *ngIf="service.isPending$ | async"
          >Pending user input</ng-container
        >
        <ng-container *ngIf="service.isActive$ | async"
          >Domain configured successfully</ng-container
        ><ng-container *ngIf="service.isFailed$ | async"
          >Domain configuration error</ng-container
        >
      </span>
    </div>
    <!-- ------------------------------------- -->

    <ng-container *ngIf="service.isAutogenerated$ | async">
      <p class=" m-networkAdminDomainCurrentDomain__desc">
        Your network is currently using a temporary domain. Configure your
        custom domain to begin growing your network.
      </p>
    </ng-container>
    <ng-container *ngIf="service.isPending$ | async">
      <p class=" m-networkAdminDomainCurrentDomain__desc">
        Set the following record(s) on your DNS provider to continue
      </p></ng-container
    >
    <ng-container *ngIf="service.isActive$ | async">
      <p class=" m-networkAdminDomainCurrentDomain__desc">
        Note: If you choose to use the subdomain and put your custom domain
        later, you will have to migrate all network related data and content.
      </p>

      <p class=" m-networkAdminDomainCurrentDomain__desc">
        This is what the record(s) on your DNS provider should look like
      </p>
    </ng-container>
    <ng-container *ngIf="service.isFailed$ | async">
      <p class=" m-networkAdminDomainCurrentDomain__desc">
        The domain you've attempted to set up cannot be used at this time. It
        may be blocked, deleted, or otherwise unavailable.
      </p></ng-container
    >

    <!-- ------------------------------------- -->

    <div class="m-networkAdminDomain__record" *ngIf="domain?.dnsRecord">
      <div>
        <span>Type</span>
        <span>{{ domain.dnsRecord?.type }}</span>
        <span>{{ domain.ownershipVerificationDnsRecord?.type }}</span>
      </div>
      <div>
        <span>Name</span>
        <span>{{ domain.dnsRecord?.name }}</span>
        <span>{{ domain.ownershipVerificationDnsRecord?.name }}</span>
      </div>
      <div>
        <span>Value</span>
        <span>{{ domain.dnsRecord?.value }}</span>
        <span>{{ domain.ownershipVerificationDnsRecord?.value }}</span>
      </div>
    </div>
    <!-- ------------------------------------- -->

    <div class="m-networkAdminDomainCurrentDomain__buttonWrapper">
      <m-button
        color="blue"
        size="small"
        [solid]="service.isAutogenerated$ | async"
        (onAction)="openSetupModal()"
        data-ref="network-admin-domain-setup-modal-button"
        ><ng-container
          *ngIf="service.isAutogenerated$ | async"
          i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__SETUP_CUSTOM_DOMAIN"
          >Setup custom domain</ng-container
        ><ng-container
          *ngIf="(service.isActive$ | async) || (service.isPending$ | async)"
          i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__EDIT_CUSTOM_DOMAIN"
          >Edit custom domain</ng-container
        >
        <ng-container
          *ngIf="service.isFailed$ | async"
          i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__TRY_ANOTHER_DOMAIN"
          >Try another domain</ng-container
        >
      </m-button>
    </div>
  </div>
  <!-- ------------------------------------ -->
  <!-- INSTRUCTIONS  -->
  <!-- ------------------------------------ -->
  <h4
    class="m-networkAdminDomainInstructions__title"
    i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__INSTRUCTIONS__TITLE"
  >
    Configure your DNS settings
  </h4>
  <p class="m-networkAdminDomainInstructions__desc">
    <ng-container
      *ngIf="service.isAutogenerated$ | async"
      i18n="

        @@NETWORK_ADMIN_CONSOLE_DOMAIN__INSTRUCTIONS__FINISH_STEPS_FOR_AUTOGENERATED_STATUS

      "
      >To finish configuring your custom domain, you’ll need to set a new A or
      CNAME record in the DNS controls for your domain. Typically this is
      accessible through the service where you purchased your custom domain.
    </ng-container>
    <ng-container
      *ngIf="!(service.isAutogenerated$ | async)"
      i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__INSTRUCTIONS__FINISH_STEPS"
    >
      To finish the custom domain setup, you can set up either an A or CNAME
      record at your DNS provider.</ng-container
    >
  </p>
  <p
    class="m-networkAdminDomainInstructions__desc"
    i18n="@@NETWORK_ADMIN_CONSOLE_DOMAIN__INSTRUCTIONS__FINISH_EXAMPLES"
  >
    Examples: Cloudfare, Namecheap, GoDaddy.
  </p>
  <a
    class="m-networkAdminDomainInstructions__link"
    href="https://www.minds.com/p/networks-dns-configuration"
    target="_blank"
    >Setup guide</a
  >
  <div
    class="m-networkAdminDomainInstructions__recordType"
    *ngIf="
      domain?.dnsRecord?.type === dnsRecordEnum.A ||
      (service.isAutogenerated$ | async)
    "
  >
    <span class="m-networkAdminDomainInstructionsRecordType__title"
      >A record</span
    >
    <p class="m-networkAdminDomainInstructions__desc">
      <ng-container *ngIf="service.isAutogenerated$ | async">If</ng-container
      ><ng-container *ngIf="!(service.isAutogenerated$ | async)"
        >Because</ng-container
      >
      you’re using a root-level domain, you’ll need to configure an
      <strong>A</strong>
      record in your DNS settings, like this
    </p>

    <div class="m-networkAdminDomain__record">
      <div><span>Type</span><span>A record</span></div>
      <div><span>Name</span><span>@</span></div>
      <div><span>Value</span><span>76.76.21.21</span></div>
    </div>
  </div>
  <div
    class="m-networkAdminDomainInstructions__recordType"
    *ngIf="
      domain?.dnsRecord?.type === dnsRecordEnum.Cname ||
      (service.isAutogenerated$ | async)
    "
  >
    <span class="m-networkAdminDomainInstructionsRecordType__title">CNAME</span>
    <p class="m-networkAdminDomainInstructions__desc">
      <ng-container *ngIf="service.isAutogenerated$ | async">If</ng-container
      ><ng-container *ngIf="!(service.isAutogenerated$ | async)"
        >Because</ng-container
      >
      you’re using a sub-domain or directory, you’ll need to configure a
      <strong>CNAME</strong> record in your DNS settings, like this. For address
      values, you do NOT need to include https:// or www.
    </p>

    <div class="m-networkAdminDomain__record">
      <div><span>Type</span><span>CNAME</span></div>
      <div>
        <span>Name</span
        ><span>{{ domain?.dnsRecord?.name ?? 'mystore.com' }}</span>
      </div>
      <div>
        <span>Value</span
        ><span
          >{{ domain?.dnsRecord?.value ?? 'customers.saasprovider.com' }}</span
        >
      </div>
    </div>
  </div>
  <div
    class="m-networkAdminDomainInstructions__recordType"
    *ngIf="
      domain?.ownershipVerificationDnsRecord?.type === dnsRecordEnum.Txt ||
      (service.isAutogenerated$ | async)
    "
  >
    <span class="m-networkAdminDomainInstructionsRecordType__title">TXT</span>
    <p class="m-networkAdminDomainInstructions__desc">
      You<ng-container *ngIf="service.isAutogenerated$ | async">
        may</ng-container
      >
      <ng-container *ngIf="!(service.isAutogenerated$ | async)">
        will</ng-container
      >
      also need to verify ownership of your domain by configuring a
      <strong>TXT</strong> record in your DNS settings, like this
    </p>

    <div class="m-networkAdminDomain__record">
      <div><span>Type</span><span>TXT</span></div>
      <div>
        <span>Name</span
        ><span
          >{{ domain?.ownershipVerificationDnsRecord?.name ?? 'mystore.com' }}</span
        >
      </div>
      <div>
        <span>Value</span
        ><span
          >{{ domain?.ownershipVerificationDnsRecord?.value ?? 'abcdef-1234-5678' }}</span
        >
      </div>
    </div>
  </div>
</ng-container>

<ng-template #loadingSpinnerTemplate>
  <m-loadingSpinner [inProgress]="true"></m-loadingSpinner>
</ng-template>
