@import 'defaults.scss';

// *********************************
// ** BACKGROUND CHANGE ON HOVER **
// *
// * Background transitions/colors for all affected child components
// * Note: we don't change the bg of the entire
// * activity because we don't want to include expanded comments
// *********************************

$transitionProps: 0.3s ease-out;
$color: $m-bgColor--secondaryAlt;

:host {
  // Don't change activity background on hover
  // for single pages or modals
  &:not(.m-activity--isSingle):not(.m-activity--modal) {
    // TRANSITIONS
    // Note: opacity transitions are for fadeouts/gradients
    // (Necessary because css transitions
    // can't handle gradients so we use a substitute element)
    .m-activity__top,
    ::ng-deep m-activityV2__toolbar,
    ::ng-deep m-comments__entityOutletV2,
    ::ng-deep
      m-activityV2__content.m-activityContent--fixedHeight
      .m-activityContent__boostRotatorFadeout--hover {
      transition: background $transitionProps, box-shadow $transitionProps,
        opacity $transitionProps;
    }

    //---------------------------------------

    &:hover {
      .m-activity__top,
      ::ng-deep m-activityV2__toolbar,
      ::ng-deep m-comments__entityOutletV2 {
        cursor: pointer;
        @include m-theme() {
          background: themed($color);
        }
      }

      //---------------------------------------

      &.m-activity--commentsExpanded {
        ::ng-deep m-activityV2__toolbar {
          // Create a bit of visual space at the bottom of the
          // toolbar when comments are expanded
          // (a.k.a. hacky workaround for spacing)
          @include m-theme() {
            box-shadow: 0px -4px 0px 0px themed($m-bgColor--primary) inset;
          }
        }
        ::ng-deep m-comments__entityOutletV2 {
          // Don't highlight background of expanded comments
          cursor: default;
          @include m-theme() {
            background: themed($m-bgColor--primary);
          }
        }
      }

      //---------------------------------------

      ::ng-deep m-activityV2__content {
        &.m-activityContent--fixedHeight
          .m-activityContent__boostRotatorFadeout--hover {
          opacity: 1;
          cursor: pointer;
          @include m-theme() {
            background: linear-gradient(
              to bottom,
              rgba(themed($m-bgColor--secondaryAlt), 0) 0%,
              rgba(themed($m-bgColor--secondaryAlt), 0.95) 64.58%,
              themed($m-bgColor--secondaryAlt) 100%
            ) !important;
          }
        }
      }
    }
  }
  // ------------------------------------------------------
  // ------------------------------------------------------
  // ------------------------------------------------------
  // DO change the background of quotes and rich embeds,
  // even if single page/modal
  ::ng-deep m-activityV2__quote,
  ::ng-deep m-activityV2__content minds-rich-embed .m-rich-embed-src {
    transition: background $transitionProps;
  }

  &:hover {
    ::ng-deep m-activityV2__quote,
    ::ng-deep m-activityV2__content minds-rich-embed .m-rich-embed-src {
      &:hover {
        @include m-theme() {
          background: rgba(themed($m-bgColor--btnHover), 0.4);
        }
      }
    }
  }
}
