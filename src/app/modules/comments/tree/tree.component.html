<ng-container *ngIf="showOnlyPoster">
  <m-comment__poster
    [guid]="guid"
    [parent]="entity"
    [entity]="entity"
    [level]="0"
    (posted)="onPosted($event); showOnlyPoster = false"
    (optimisticPost)="onOptimisticPost($event)"
  >
  </m-comment__poster>
  <div (click)="showOnlyPoster = false">Show comments</div>
</ng-container>

<ng-container *ngIf="!showOnlyPoster">
  <m-comments__thread
    *ngIf="!isPersistentFeedExperimentActive"
    [entity]="entity"
    [parent]="entity"
    [canEdit]="canEdit"
    [canDelete]="canDelete"
    [readonly]="readonly"
    [level]="0"
    [limit]="limit"
    [scrollable]="scrollable"
    [conversation]="conversation"
    [compact]="compact"
    (onHeightChange)="onHeightChange.emit($event)"
  >
  </m-comments__thread>
  <m-comments__threadV2
    *ngIf="isPersistentFeedExperimentActive"
    [entity]="entity"
    [parent]="entity"
    [canEdit]="canEdit"
    [canDelete]="canDelete"
    [readonly]="readonly"
    [level]="0"
    [limit]="limit"
    [scrollable]="scrollable"
    [conversation]="conversation"
    [compact]="compact"
    (onHeightChange)="onHeightChange.emit($event)"
  >
  </m-comments__threadV2>
</ng-container>
