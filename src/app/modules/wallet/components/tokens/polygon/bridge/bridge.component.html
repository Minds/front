<div
  class="m-polygon__tokenConverter"
  [formGroup]="form"
  *ngIf="(service.isLoading$ | async) && !(service.hasError$ | async)"
>
  <span class="m-polygon__boxTitle">From</span>
  <div class="m-polygon__inputAmountContainer">
    <div class="m-polygon__row">
      <img
        [src]="fromNetwork.logoPath"
        alt="polygon"
        class="m-polygon__chainLogo"
      />
      {{ fromNetwork.networkName }} chain
      <div class="m-polygon__grow"></div>
      <span class="m-polygon__balance-placeholder">Balance: </span>
      <span class="m-polygon__balance">
        {{ (currentNetworkBalance | number) ?? '0'}} MINDS
      </span>
    </div>
    <div class="m-polygon__input-container">
      <input
        type="text"
        class="m-polygon__input"
        placeholder="Enter amount"
        formControlName="amount"
        [(ngModel)]="amount"
      />

      <div class="m-polygon__max-button" (click)="setMaxAmount()">MAX</div>
    </div>
  </div>
  <span class="material-icons m-skale__swapButton" (click)="swapNetworks()">
    swap_vert
  </span>

  <span class="m-polygon__boxTitle">To</span>
  <div class="m-polygon__inputAmountContainer">
    <div class="m-polygon__row">
      <img
        [src]="receivingNetwork.logoPath"
        alt="polygon"
        class="m-polygon__chainLogo"
      />
      {{ receivingNetwork.networkName }} chain
      <div class="m-polygon__grow"></div>
      <span class="m-polygon__balance-placeholder">Balance: </span>
      <span class="m-polygon__balance">
        {{ (receivingNetworkBalance | number) ?? '0'}} MINDS
      </span>
    </div>
  </div>

  <div class="m-polygon__button-container">
    <m-button
      [hidden]="fromNetwork.networkName !== MAINNET_NETWORK.networkName"
      color="primary"
      (onAction)="approve()"
      [disabled]="!needsApproval || !validNetwork"
    >
      Approve
    </m-button>
    <m-button
      color="primary"
      (onAction)="transfer()"
      [disabled]="amount === '0' || needsApproval || !validNetwork"
    >
      Transfer
    </m-button>
  </div>
</div>

<div class="m-polygon__tokenConverter" *ngIf="service.isLoading$ | async">
  <div class="mdl-spinner mdl-js-spinner is-active" [mdl]></div>
  <span class="m-polygon-swapTitle">Swap in progress</span>
  <span
    class="m-polygon-swapSubtitle"
    *ngIf="fromNetwork.networkName !== MAINNET_NETWORK.networkName"
    >You need to confirm one more step to complete the deposit
    transaction...</span
  >
  <span
    class="m-polygon-swapSubtitle"
    *ngIf="fromNetwork.networkName === MAINNET_NETWORK.networkName"
    >Please wait while we get your funds transferred...</span
  >
</div>

<div class="m-polygon__tokenConverter" *ngIf="!(service.hasError$ | async)">
  <m-icon class="m-polygon__error" iconId="error_outline"></m-icon>
  <span class="m-polygon-errorTitle ">Something went wrong</span>
  <span class="m-polygon-swapSubtitle ">Please try again</span>
  <m-button color="primary" (onAction)="transfer()">
    Retry
  </m-button>
</div>
